{"version":3,"sources":["webpack:///route-auction.chunk.ce43c.js","webpack:///./components/buttonLink/index.js","webpack:///./routes/auction/index.js","webpack:///./components/buttonLink/style.css","webpack:///./routes/auction/style.css"],"names":["webpackJsonp","G44s","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","d","Button","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__style__","n","__WEBPACK_IMPORTED_MODULE_1__style___default","__WEBPACK_IMPORTED_MODULE_2_preact_router_match__","_Component","this","apply","arguments","render","href","props","to","className","a","button","children","HaUu","defineProperty","Auction","__WEBPACK_IMPORTED_MODULE_1__components_box__","__WEBPACK_IMPORTED_MODULE_2__components_buttonLink__","__WEBPACK_IMPORTED_MODULE_3__components_button__","__WEBPACK_IMPORTED_MODULE_4__style__","__WEBPACK_IMPORTED_MODULE_4__style___default","_extends","assign","target","i","length","source","key","hasOwnProperty","Contract","default","_ref","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_this","state","userAuctions","auctions","page","userPage","user","componentWillMount","getAuctions","getUserAuctions","_this2","getAuctionsLength","err","res","limit","toNumber","auctionHash","getFortress","newState","name","web3","toAscii","replace","x","y","wins","setState","highestBid","bids","fromWei","parseFloat","auctionEnd","_this3","eth","getAccounts","error","accounts","getUserAuctionsLength","highestBidder","getAuctionAmount","amount","updateInputValue","auction","evt","bid","bidAuction","toWei","claim","endAuction","withdraw","hash","input","onChange","bind","Date","actionButtons","now","resources","onClick","push","fortress","window","src","width","castle","content","toLocaleDateString","year","month","day","hour","minute","end","N3gZ","exports","R+ko"],"mappings":"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","file":"route-auction.chunk.ce43c.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"G44s\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return Button; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style__ = __webpack_require__(\"N3gZ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__style__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_router_match__ = __webpack_require__(\"sw5u\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_preact_router_match___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_preact_router_match__);\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar Button = function (_Component) {\n\t_inherits(Button, _Component);\n\n\tfunction Button() {\n\t\t_classCallCheck(this, Button);\n\n\t\treturn _possibleConstructorReturn(this, _Component.apply(this, arguments));\n\t}\n\n\tButton.prototype.render = function render() {\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t__WEBPACK_IMPORTED_MODULE_2_preact_router_match__[\"Link\"],\n\t\t\t{ href: this.props.to, className: __WEBPACK_IMPORTED_MODULE_1__style___default.a.button },\n\t\t\tthis.props.children\n\t\t);\n\t};\n\n\treturn Button;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ }),\n\n/***/ \"HaUu\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Auction; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_box__ = __webpack_require__(\"0+Hh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_buttonLink__ = __webpack_require__(\"G44s\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_button__ = __webpack_require__(\"rAoZ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__style__ = __webpack_require__(\"R+ko\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__style__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar Contract = __webpack_require__(\"+ENZ\").default;\n\nvar _ref = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref5 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref6 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref7 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref8 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref9 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref10 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h3',\n\tnull,\n\t'All Auctions'\n);\n\nvar _ref11 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h3',\n\tnull,\n\t'My Auctions'\n);\n\nvar Auction = function (_Component) {\n\t_inherits(Auction, _Component);\n\n\tfunction Auction() {\n\t\t_classCallCheck(this, Auction);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this));\n\n\t\t_this.state = {\n\t\t\tuserAuctions: {},\n\t\t\tauctions: {},\n\t\t\tpage: 0,\n\t\t\tuserPage: 0,\n\t\t\tuser: ''\n\t\t};\n\t\treturn _this;\n\t}\n\n\tAuction.prototype.componentWillMount = function componentWillMount() {\n\t\tthis.getAuctions();\n\t\tthis.getUserAuctions();\n\t};\n\n\tAuction.prototype.getAuctions = function getAuctions() {\n\t\tvar _this2 = this;\n\n\t\tContract.getAuctionsLength(function (err, res) {\n\t\t\t// pagination\n\t\t\tvar itemsPerPage = 10;\n\t\t\tvar limit = res.toNumber() - itemsPerPage * (_this2.state.page + 1);\n\t\t\tif (limit < 0) limit = 0;\n\t\t\tfor (var i = res.toNumber() - itemsPerPage * _this2.state.page; i > limit; i--) {\n\t\t\t\tContract.auctions(i - 1, function (err, auctionHash) {\n\t\t\t\t\tContract.getFortress(auctionHash, function (err, res) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\tauctions: _extends({}, _this2.state.auctions)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.auctions[auctionHash] = _extends({}, newState.auctions[auctionHash], {\n\t\t\t\t\t\t\tname: web3.toAscii(res[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\t\twins: res[4].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t\tContract.highestBid(auctionHash, function (err, res) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\tauctions: _extends({}, _this2.state.auctions),\n\t\t\t\t\t\t\tbids: _extends({}, _this2.state.bids)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.auctions[auctionHash] = _extends({}, newState.auctions[auctionHash], {\n\t\t\t\t\t\t\thighestBid: web3.fromWei(res.toNumber() / 99 * 100)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.bids[auctionHash] = parseFloat(web3.fromWei(res.toNumber() / 99 * 100)) + 0.1;\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t\tContract.auctionEnd(auctionHash, function (err, res) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\tauctions: _extends({}, _this2.state.auctions)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.auctions[auctionHash] = _extends({}, newState.auctions[auctionHash], {\n\t\t\t\t\t\t\tauctionEnd: res.toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tAuction.prototype.getUserAuctions = function getUserAuctions() {\n\t\tvar _this3 = this;\n\n\t\tweb3.eth.getAccounts(function (error, accounts) {\n\t\t\t_this3.setState(_extends({}, _this3.state, {\n\t\t\t\tuser: accounts[0]\n\t\t\t}));\n\t\t\tContract.getUserAuctionsLength(accounts[0], function (err, res) {\n\t\t\t\t// pagination\n\t\t\t\tvar itemsPerPage = 5;\n\t\t\t\tvar limit = res.toNumber() - itemsPerPage * (_this3.state.userPage + 1);\n\t\t\t\tif (limit < 0) limit = 0;\n\t\t\t\tfor (var i = res.toNumber() - itemsPerPage * _this3.state.userPage; i > limit; i--) {\n\t\t\t\t\tContract.userAuctions(accounts[0], i - 1, function (err, auctionHash) {\n\t\t\t\t\t\tContract.getFortress(auctionHash, function (err, res) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tuserAuctions: _extends({}, _this3.state.userAuctions)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = _extends({}, newState.userAuctions[auctionHash], {\n\t\t\t\t\t\t\t\tname: web3.toAscii(res[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\t\t\twins: res[4].toNumber()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.highestBid(auctionHash, function (err, res) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tuserAuctions: _extends({}, _this3.state.userAuctions)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = _extends({}, newState.userAuctions[auctionHash], {\n\t\t\t\t\t\t\t\thighestBid: web3.fromWei(res.toNumber() / 99 * 100)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.highestBidder(auctionHash, function (err, res) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tuserAuctions: _extends({}, _this3.state.userAuctions)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = _extends({}, newState.userAuctions[auctionHash], {\n\t\t\t\t\t\t\t\thighestBidder: res\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.auctionEnd(auctionHash, function (err, res) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tuserAuctions: _extends({}, _this3.state.userAuctions)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = _extends({}, newState.userAuctions[auctionHash], {\n\t\t\t\t\t\t\t\tauctionEnd: res.toNumber()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.getAuctionAmount(auctionHash, accounts[0], function (err, res) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tuserAuctions: _extends({}, _this3.state.userAuctions)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = _extends({}, newState.userAuctions[auctionHash], {\n\t\t\t\t\t\t\t\tamount: web3.fromWei(res.toNumber())\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\n\tAuction.prototype.updateInputValue = function updateInputValue(auction, evt) {\n\t\tvar newState = _extends({}, this.state, {\n\t\t\tbids: _extends({}, this.state.bids)\n\t\t});\n\t\tnewState.bids[auction] = evt.target.value;\n\t\tthis.setState(newState);\n\t};\n\n\tAuction.prototype.bid = function bid(auction) {\n\t\tContract.bidAuction(auction, {\n\t\t\tvalue: web3.toWei(this.state.bids[auction])\n\t\t}, function (err, res) {\n\t\t\tif (!err) {}\n\t\t});\n\t};\n\n\tAuction.prototype.claim = function claim(auction) {\n\t\tContract.endAuction(auction, function (err, res) {\n\t\t\tif (!err) {}\n\t\t});\n\t};\n\n\tAuction.prototype.withdraw = function withdraw(auction) {\n\t\tContract.withdraw(auction, function (err, res) {\n\t\t\tif (!err) {}\n\t\t});\n\t};\n\n\tAuction.prototype.render = function render() {\n\n\t\tvar auctions = [];\n\n\t\tfor (var hash in this.state.auctions) {\n\n\t\t\tvar input = '';\n\n\t\t\tif (this.state.bids && this.state.bids[hash]) {\n\t\t\t\tinput = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { value: this.state.bids[hash], onChange: this.updateInputValue.bind(this, hash), className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.input });\n\t\t\t}\n\n\t\t\tvar auctionEnd = new Date(this.state.auctions[hash].auctionEnd * 1000);\n\n\t\t\tvar actionButtons = '';\n\t\t\tif (Date.now() <= this.state.auctions[hash].auctionEnd * 1000) {\n\t\t\t\tactionButtons = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.resources },\n\t\t\t\t\tinput,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_3__components_button__[\"a\" /* default */],\n\t\t\t\t\t\t{ onClick: this.bid.bind(this, hash) },\n\t\t\t\t\t\t'Bid'\n\t\t\t\t\t),\n\t\t\t\t\t'If already bid, it increases your bid'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvar auction = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.fortress },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.window },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/castle.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.castle })\n\t\t\t\t),\n\t\t\t\tactionButtons,\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.content },\n\t\t\t\t\tthis.state.auctions[hash].name,\n\t\t\t\t\t' (',\n\t\t\t\t\tthis.state.auctions[hash].x,\n\t\t\t\t\t'/',\n\t\t\t\t\tthis.state.auctions[hash].y,\n\t\t\t\t\t')',\n\t\t\t\t\t_ref,\n\t\t\t\t\t'Highest bid: ',\n\t\t\t\t\tthis.state.auctions[hash].highestBid,\n\t\t\t\t\t_ref2,\n\t\t\t\t\t'End:',\n\t\t\t\t\tauctionEnd.toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\tyear: '2-digit',\n\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t}),\n\t\t\t\t\t_ref3,\n\t\t\t\t\t_ref4,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_buttonLink__[\"a\" /* default */],\n\t\t\t\t\t\t{ to: '/fortress/' + hash },\n\t\t\t\t\t\t'Details'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.end })\n\t\t\t);\n\n\t\t\tauctions.push(auction);\n\t\t}\n\n\t\tvar userAuctions = [];\n\n\t\tfor (var hash in this.state.userAuctions) {\n\n\t\t\tvar input = '';\n\n\t\t\tif (this.state.bids && this.state.bids[hash]) {\n\t\t\t\tinput = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('input', { value: this.state.bids[hash], onChange: this.updateInputValue.bind(this, hash), className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.input });\n\t\t\t}\n\n\t\t\tvar _auctionEnd = new Date(this.state.userAuctions[hash].auctionEnd * 1000);\n\n\t\t\tvar actionButtons = '';\n\t\t\tif (Date.now() <= this.state.userAuctions[hash].auctionEnd * 1000) {\n\t\t\t\tactionButtons = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.resources },\n\t\t\t\t\tinput,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_3__components_button__[\"a\" /* default */],\n\t\t\t\t\t\t{ onClick: this.bid.bind(this, hash) },\n\t\t\t\t\t\t'Bid'\n\t\t\t\t\t),\n\t\t\t\t\t'If already bid, it increases your bid'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// show withdraw or claim button\n\t\t\t\tif (this.state.userAuctions[hash].highestBidder === this.state.user) {\n\t\t\t\t\tactionButtons = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.resources },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_3__components_button__[\"a\" /* default */],\n\t\t\t\t\t\t\t{ onClick: this.claim.bind(this, hash) },\n\t\t\t\t\t\t\t'Claim'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'If this fails, increase gas limit'\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tactionButtons = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.resources },\n\t\t\t\t\t\t'Amount: ',\n\t\t\t\t\t\tthis.state.userAuctions[hash].amount,\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_3__components_button__[\"a\" /* default */],\n\t\t\t\t\t\t\t{ onClick: this.withdraw.bind(this, hash) },\n\t\t\t\t\t\t\t'Withdraw'\n\t\t\t\t\t\t),\n\t\t\t\t\t\t'If this fails, increase gas limit'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar _auction = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.fortress },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.window },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/castle.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.castle })\n\t\t\t\t),\n\t\t\t\tactionButtons,\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.content },\n\t\t\t\t\tthis.state.userAuctions[hash].name,\n\t\t\t\t\t' (',\n\t\t\t\t\tthis.state.userAuctions[hash].x,\n\t\t\t\t\t'/',\n\t\t\t\t\tthis.state.userAuctions[hash].y,\n\t\t\t\t\t')',\n\t\t\t\t\t_ref5,\n\t\t\t\t\t'Highest bid: ',\n\t\t\t\t\tthis.state.userAuctions[hash].highestBid,\n\t\t\t\t\t_ref6,\n\t\t\t\t\t'End:',\n\t\t\t\t\t_auctionEnd.toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\tyear: '2-digit',\n\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t}),\n\t\t\t\t\t_ref7,\n\t\t\t\t\t_ref8,\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_buttonLink__[\"a\" /* default */],\n\t\t\t\t\t\t{ to: '/fortress/' + hash },\n\t\t\t\t\t\t'Details'\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_4__style___default.a.end })\n\t\t\t);\n\n\t\t\tuserAuctions.push(_auction);\n\t\t}\n\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__components_box__[\"a\" /* default */],\n\t\t\tnull,\n\t\t\t'Caution! If you win your own auction, you can reclaim the fortress, but not the ether!',\n\t\t\t_ref9,\n\t\t\t'There is also a 1% fee!',\n\t\t\t_ref10,\n\t\t\tauctions,\n\t\t\t_ref11,\n\t\t\tuserAuctions\n\t\t);\n\t};\n\n\treturn Auction;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ }),\n\n/***/ \"N3gZ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"button\":\"button__2iZ3o\"};\n\n/***/ }),\n\n/***/ \"R+ko\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"fortress\":\"fortress__2f5gj\",\"window\":\"window__2C3Pi\",\"castle\":\"castle__2lR2_\",\"resources\":\"resources__37fZD\",\"end\":\"end__3lKKU\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-auction.chunk.ce43c.js","import { h, Component } from 'preact';\nimport style from './style';\nimport { Link } from 'preact-router/match';\n\nexport default class Button extends Component {\n\n\trender() {\n\t\treturn (\n\t\t\t<Link href={this.props.to} className={style.button}>\n                {this.props.children}\n            </Link>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./components/buttonLink/index.js","import { h, Component } from 'preact';\nimport Box from '../../components/box';\nimport ButtonLink from '../../components/buttonLink';\nimport Button from '../../components/button';\nimport style from './style';\n\nconst Contract = require('./../../contract').default;\n\nexport default class Auction extends Component {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tuserAuctions: {},\n\t\t\tauctions: {},\n\t\t\tpage: 0,\n\t\t\tuserPage: 0,\n\t\t\tuser: ''\n\t\t}\n\t}\n\n\tcomponentWillMount() {\n\t\tthis.getAuctions();\n\t\tthis.getUserAuctions();\n\t}\n\n\tgetAuctions() {\n\t\tContract.getAuctionsLength((err, res) => {\n\t\t\t// pagination\n\t\t\tconst itemsPerPage = 10;\n\t\t\tvar limit = res.toNumber() - (itemsPerPage * (this.state.page + 1));\n\t\t\tif (limit < 0) limit = 0;\n\t\t\tfor (let i = res.toNumber() - (itemsPerPage * (this.state.page)); i > limit; i--) {\n\t\t\t\tContract.auctions((i - 1), (err, auctionHash) => {\n\t\t\t\t\tContract.getFortress(auctionHash, (err, res) => {\n\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tauctions: {\n\t\t\t\t\t\t\t\t...this.state.auctions,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.auctions[auctionHash] = {\n\t\t\t\t\t\t\t...newState.auctions[auctionHash],\n\t\t\t\t\t\t\tname: web3.toAscii(res[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\t\twins: res[4].toNumber(),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t\tContract.highestBid(auctionHash, (err, res) => {\n\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tauctions: {\n\t\t\t\t\t\t\t\t...this.state.auctions,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tbids: {\n\t\t\t\t\t\t\t\t...this.state.bids,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.auctions[auctionHash] = {\n\t\t\t\t\t\t\t...newState.auctions[auctionHash],\n\t\t\t\t\t\t\thighestBid: web3.fromWei(res.toNumber() / 99 * 100),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewState.bids[auctionHash] = parseFloat(web3.fromWei(res.toNumber() / 99 * 100)) + 0.1;\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t\tContract.auctionEnd(auctionHash, (err, res) => {\n\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tauctions: {\n\t\t\t\t\t\t\t\t...this.state.auctions,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.auctions[auctionHash] = {\n\t\t\t\t\t\t\t...newState.auctions[auctionHash],\n\t\t\t\t\t\t\tauctionEnd: res.toNumber(),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t}\n\n\tgetUserAuctions() {\n\t\tweb3.eth.getAccounts((error, accounts) => {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tuser: accounts[0]\n\t\t\t});\n\t\t\tContract.getUserAuctionsLength(accounts[0], (err, res) => {\n\t\t\t\t// pagination\n\t\t\t\tconst itemsPerPage = 5;\n\t\t\t\tvar limit = res.toNumber() - (itemsPerPage * (this.state.userPage + 1));\n\t\t\t\tif (limit < 0) limit = 0;\n\t\t\t\tfor (let i = res.toNumber() - (itemsPerPage * (this.state.userPage)); i > limit; i--) {\n\t\t\t\t\tContract.userAuctions(accounts[0], (i - 1), (err, auctionHash) => {\n\t\t\t\t\t\tContract.getFortress(auctionHash, (err, res) => {\n\t\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tuserAuctions: {\n\t\t\t\t\t\t\t\t\t...this.state.userAuctions,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = {\n\t\t\t\t\t\t\t\t...newState.userAuctions[auctionHash],\n\t\t\t\t\t\t\t\tname: web3.toAscii(res[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\t\t\twins: res[4].toNumber(),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.highestBid(auctionHash, (err, res) => {\n\t\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tuserAuctions: {\n\t\t\t\t\t\t\t\t\t...this.state.userAuctions,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = {\n\t\t\t\t\t\t\t\t...newState.userAuctions[auctionHash],\n\t\t\t\t\t\t\t\thighestBid: web3.fromWei(res.toNumber() / 99 * 100),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.highestBidder(auctionHash, (err, res) => {\n\t\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tuserAuctions: {\n\t\t\t\t\t\t\t\t\t...this.state.userAuctions,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = {\n\t\t\t\t\t\t\t\t...newState.userAuctions[auctionHash],\n\t\t\t\t\t\t\t\thighestBidder: res,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.auctionEnd(auctionHash, (err, res) => {\n\t\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tuserAuctions: {\n\t\t\t\t\t\t\t\t\t...this.state.userAuctions,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = {\n\t\t\t\t\t\t\t\t...newState.userAuctions[auctionHash],\n\t\t\t\t\t\t\t\tauctionEnd: res.toNumber(),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tContract.getAuctionAmount(auctionHash, accounts[0], (err, res) => {\n\t\t\t\t\t\t\tvar newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tuserAuctions: {\n\t\t\t\t\t\t\t\t\t...this.state.userAuctions,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.userAuctions[auctionHash] = {\n\t\t\t\t\t\t\t\t...newState.userAuctions[auctionHash],\n\t\t\t\t\t\t\t\tamount: web3.fromWei(res.toNumber()),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\t\n\tupdateInputValue(auction, evt) {\n\t\tvar newState = {\n\t\t\t...this.state,\n\t\t\tbids: {\n\t\t\t\t...this.state.bids,\n\t\t\t}\n\t\t};\n\t\tnewState.bids[auction] = evt.target.value;\n\t\tthis.setState(newState);\n\t}\n\t\n\tbid(auction) {\n\t\tContract.bidAuction(auction, {\n            value: web3.toWei(this.state.bids[auction])\n        }, (err, res) => {\n            if (!err) {\n                \n            }\n        });\n\t}\n\t\n\tclaim(auction) {\n\t\tContract.endAuction(auction, (err, res) => {\n            if (!err) {\n                \n            }\n        });\n\t}\n\t\n\twithdraw(auction) {\n\t\tContract.withdraw(auction, (err, res) => {\n            if (!err) {\n                \n            }\n        });\n\t}\n\n\trender() {\n\n\t\tconst auctions = [];\n\n\t\tfor (var hash in this.state.auctions) {\n\n\t\t\tvar input = '';\n\n\t\t\tif (this.state.bids && this.state.bids[hash]) {\n\t\t\t\tinput = (\n\t\t\t\t\t<input value={this.state.bids[hash]} onChange={this.updateInputValue.bind(this, hash)} className={style.input} />\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst auctionEnd = new Date(this.state.auctions[hash].auctionEnd * 1000);\n\n\t\t\tvar actionButtons = '';\n\t\t\tif (Date.now() <= (this.state.auctions[hash].auctionEnd * 1000)) {\n\t\t\t\tactionButtons = (\n\t\t\t\t\t<div className={style.resources}>\n\t\t\t\t\t\t{input}\n\t\t\t\t\t\t<Button onClick={this.bid.bind(this, hash)}>\n\t\t\t\t\t\t\tBid\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\tIf already bid, it increases your bid\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst auction = (\n\t\t\t\t<div className={style.fortress}>\n\t\t\t\t\t<div className={style.window}>\n\t\t\t\t\t\t<img src='/assets/castle.png' width=\"60\" className={style.castle} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{actionButtons}\n\t\t\t\t\t<div className={style.content}>\n\t\t\t\t\t\t{this.state.auctions[hash].name} ({this.state.auctions[hash].x}/{this.state.auctions[hash].y})<br />\n\t\t\t\t\t\tHighest bid: {this.state.auctions[hash].highestBid}<br />\n\t\t\t\t\t\tEnd:{auctionEnd.toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\t\tyear: '2-digit',\n\t\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t\t})}<br /><br />\n\t\t\t\t\t\t<ButtonLink to={'/fortress/' + hash}>Details</ButtonLink>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={style.end} />\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tauctions.push(auction);\n\t\t}\n\t\t\n\t\tconst userAuctions = [];\n\n\t\tfor (var hash in this.state.userAuctions) {\n\t\t\t\n\t\t\tvar input = '';\n\n\t\t\tif (this.state.bids && this.state.bids[hash]) {\n\t\t\t\tinput = (\n\t\t\t\t\t<input value={this.state.bids[hash]} onChange={this.updateInputValue.bind(this, hash)} className={style.input} />\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst auctionEnd = new Date(this.state.userAuctions[hash].auctionEnd * 1000);\n\n\t\t\tvar actionButtons = '';\n\t\t\tif (Date.now() <= (this.state.userAuctions[hash].auctionEnd * 1000)) {\n\t\t\t\tactionButtons = (\n\t\t\t\t\t<div className={style.resources}>\n\t\t\t\t\t\t{input}\n\t\t\t\t\t\t<Button onClick={this.bid.bind(this, hash)}>\n\t\t\t\t\t\t\tBid\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\tIf already bid, it increases your bid\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// show withdraw or claim button\n\t\t\t\tif (this.state.userAuctions[hash].highestBidder === this.state.user) {\n\t\t\t\t\tactionButtons = (\n\t\t\t\t\t\t<div className={style.resources}>\n\t\t\t\t\t\t\t<Button onClick={this.claim.bind(this, hash)}>\n\t\t\t\t\t\t\t\tClaim\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\tIf this fails, increase gas limit\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tactionButtons = (\n\t\t\t\t\t\t<div className={style.resources}>\n\t\t\t\t\t\t\tAmount: {this.state.userAuctions[hash].amount} \n\t\t\t\t\t\t\t<Button onClick={this.withdraw.bind(this, hash)}>\n\t\t\t\t\t\t\t\tWithdraw\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\tIf this fails, increase gas limit\n\t\t\t\t\t\t</div>\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst auction = (\n\t\t\t\t<div className={style.fortress}>\n\t\t\t\t\t<div className={style.window}>\n\t\t\t\t\t\t<img src='/assets/castle.png' width=\"60\" className={style.castle} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{actionButtons}\n\t\t\t\t\t<div className={style.content}>\n\t\t\t\t\t\t{this.state.userAuctions[hash].name} ({this.state.userAuctions[hash].x}/{this.state.userAuctions[hash].y})<br />\n\t\t\t\t\t\tHighest bid: {this.state.userAuctions[hash].highestBid}<br />\n\t\t\t\t\t\tEnd:{auctionEnd.toLocaleDateString(\"en-US\", {\n\t\t\t\t\t\t\tyear: '2-digit',\n\t\t\t\t\t\t\tmonth: '2-digit',\n\t\t\t\t\t\t\tday: '2-digit',\n\t\t\t\t\t\t\thour: '2-digit',\n\t\t\t\t\t\t\tminute: '2-digit'\n\t\t\t\t\t\t})}<br /><br />\n\t\t\t\t\t\t<ButtonLink to={'/fortress/' + hash}>Details</ButtonLink>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={style.end} />\n\t\t\t\t</div>\n\t\t\t);\n\n\t\t\tuserAuctions.push(auction);\n\t\t}\n\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\tCaution! If you win your own auction, you can reclaim the fortress, but not the ether!<br />\n\t\t\t\tThere is also a 1% fee!\n\t\t\t\t<h3>All Auctions</h3>\n\t\t\t\t{auctions}\n\t\t\t\t<h3>My Auctions</h3>\n\t\t\t\t{userAuctions}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/auction/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"button\":\"button__2iZ3o\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/buttonLink/style.css\n// module id = N3gZ\n// module chunks = 0 1","// removed by extract-text-webpack-plugin\nmodule.exports = {\"fortress\":\"fortress__2f5gj\",\"window\":\"window__2C3Pi\",\"castle\":\"castle__2lR2_\",\"resources\":\"resources__37fZD\",\"end\":\"end__3lKKU\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/auction/style.css\n// module id = R+ko\n// module chunks = 1"],"sourceRoot":""}