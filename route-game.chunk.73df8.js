webpackJsonp([0],{G44s:function(t,e,r){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}r.d(e,"a",function(){return u});var s=r("KM04"),i=(r.n(s),r("N3gZ")),a=r.n(i),c=r("sw5u"),u=(r.n(c),function(t){function e(){return n(this,t.apply(this,arguments))}return o(e,t),e.prototype.render=function(){return Object(s.h)(c.Link,{href:this.props.to,className:a.a.button},this.props.children)},e}(s.Component))},JHLW:function(t,e,r){"use strict";function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=r("KM04"),u=r("0+Hh"),l=r("er6u"),h=r.n(l),f=r("rAoZ"),p=r("+ENZ").default,b=Object(c.h)("br",null),d=function(t){function e(){var e=n(this,t.call(this));return e.state={inputValue:""},e}return o(e,t),e.prototype.componentWillMount=function(){var t=this;web3.eth.getAccounts(function(e,r){p.LogFortressCreated({owner:r[0]},function(){t.props.handle()})})},e.prototype.updateInputValue=function(t){this.setState({inputValue:t.target.value})},e.prototype.createFortressClick=function(){p.createFortress(this.state.inputValue,{value:web3.toWei(.01)},function(){}),this.setState({inputValue:""})},e.prototype.render=function(){return Object(c.h)("div",{className:h.a.container},"Costs 0.01 Ether",b,Object(c.h)("input",{value:this.state.inputValue,onChange:this.updateInputValue.bind(this),className:h.a.input,maxlength:"16"}),Object(c.h)(f.a,{onClick:this.createFortressClick.bind(this)},"Create"))},e}(c.Component),O=r("G44s"),g=r("R2VR"),w=r.n(g);r.d(e,"default",function(){return P});var y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m=r("+ENZ").default,j=Object(c.h)("div",null),v=Object(c.h)("img",{src:"/assets/gold.png",alt:"Gold",height:"24"}),_=Object(c.h)("br",null),N=Object(c.h)("img",{src:"/assets/stone.png",alt:"Stone",height:"24"}),x=Object(c.h)("br",null),S=Object(c.h)("img",{src:"/assets/wood.png",alt:"Wood",height:"24"}),F=Object(c.h)("br",null),C=Object(c.h)("br",null),E=Object(c.h)("div",null,"There is no fortress assigned to your wallet :("),k=Object(c.h)("h1",null,"Your Kingdom"),A=Object(c.h)("h1",null,"Expand"),V=Object(c.h)("div",{style:"width: 95%; text-align: center; margin: 10px"},"or visit the auctions"),P=function(t){function e(){s(this,e);var r=i(this,t.call(this));return r.state={fortresses:{},resources:{},fortressesOwned:0,fortressesAvailable:0},r}return a(e,t),e.prototype.componentWillMount=function(){this.getFortressesFromBlockchain()},e.prototype.getFortressesFromBlockchain=function(){var t=this;web3.eth.getAccounts(function(e,r){m.getIndexLength(r[0],function(e,n){for(var o=0;o<n.toNumber();o++)m.getHashFromIndex(r[0],o,function(e,r){"0x0000000000000000000000000000000000000000000000000000000000000000"!==r.toString()&&(m.getFortress(r.toString(),function(e,n){var o=y({},t.state);o.fortresses[r.toString()]={name:web3.toAscii(n[0]).replace(/\u0000/g,""),owner:n[1],x:n[2].toNumber(),y:n[3].toNumber(),wins:n[4].toNumber()},t.setState(o)}),m.getResources(r.toString(),function(e,n){var o=y({},t.state);o.resources[r.toString()]={gold:n[0].toNumber(),stone:n[1].toNumber(),wood:n[2].toNumber()},t.setState(o)}))})})}),m.getFortressesAvailable(function(e,r){t.setState(y({},t.state,{fortressesAvailable:r.toNumber()}))}),m.getFortressCount(function(e,r){t.setState(y({},t.state,{fortressesOwned:r.toNumber()}))})},e.prototype.render=function(){var t=[];for(var e in this.state.fortresses){var r=j;this.state.resources[e]&&(r=Object(c.h)("div",null,this.state.resources[e].gold,v,_,this.state.resources[e].stone,N,x,this.state.resources[e].wood,S)),t.push(Object(c.h)("div",{className:w.a.fortress},Object(c.h)("div",{className:w.a.window},Object(c.h)("img",{src:"/assets/castle.png",width:"60",className:w.a.castle})),Object(c.h)("div",{className:w.a.resources},r),Object(c.h)("div",{className:w.a.content},this.state.fortresses[e].name," (",this.state.fortresses[e].x,"/",this.state.fortresses[e].y,")",F,C,Object(c.h)(O.a,{to:"/fortress/"+e},"Details")),Object(c.h)("div",{className:w.a.end})))}return 0===t.length&&t.push(E),Object(c.h)(u.a,null,k,t,A,Object(c.h)("div",{style:"width: 95%; text-align: center; margin: 10px"},this.state.fortressesOwned," / ",this.state.fortressesAvailable+this.state.fortressesOwned," owned"),Object(c.h)(d,{handle:this.getFortressesFromBlockchain.bind(this)}),V)},e}(c.Component)},N3gZ:function(t){t.exports={button:"button__2iZ3o"}},R2VR:function(t){t.exports={fortress:"fortress__1Zrfb",window:"window__21hZi",castle:"castle__1S9ku",resources:"resources__251Ws",end:"end__2kOwm"}},er6u:function(t){t.exports={container:"container__2IYyA",input:"input__1zOWF"}}});
//# sourceMappingURL=route-game.chunk.73df8.js.map