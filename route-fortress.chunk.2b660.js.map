{"version":3,"sources":["webpack:///route-fortress.chunk.2b660.js","webpack:///./routes/fortress/style.css","webpack:///./routes/fortress/index.js"],"names":["webpackJsonp","e0/M","module","exports","fortress","window","castle","resources","troupResources","end","troup","mO7H","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Fortress","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__components_box__","n","__WEBPACK_IMPORTED_MODULE_2__components_button__","__WEBPACK_IMPORTED_MODULE_3__style__","__WEBPACK_IMPORTED_MODULE_3__style___default","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","Contract","default","_ref2","_ref3","src","alt","height","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_Component","_this","this","state","buildings","troups","name","hash","account","componentWillMount","_this2","web3","eth","getAccounts","error","accounts","setState","getBuildingIndexLength","err","indexLength","toNumber","getBuildingHash","buildingHash","getBuilding","building","newState","toAscii","replace","action","actionRate","actionValue","actionTimeout","getTroupIndexLength","getTroupHash","troupHash","getTroup","life","strength","intelligence","dexterity","getTroupCosts","gold","stone","wood","startAuction","fortressHash","build","buildingAction","render","_ref","_this3","getFortress","res","owner","x","y","wins","getResources","getFortressBuilding","level","timeout","getBuildingCosts","costs","getFortressTroups","amount","_state$buildings$buil","now","Date","mineButton","onClick","bind","buildButton","troupGold","troupStone","troupWood","troupAmount","className","a","width","content","push","auctionButton"],"mappings":"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","file":"route-fortress.chunk.2b660.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"e0/M\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"fortress\":\"fortress__3yYSI\",\"window\":\"window__1sOKp\",\"castle\":\"castle__1dCia\",\"resources\":\"resources__3T4Nw\",\"troupResources\":\"troupResources__1z2Nb\",\"end\":\"end__1bFL8\",\"troup\":\"troup__jvt9k\"};\n\n/***/ }),\n\n/***/ \"mO7H\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Fortress; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_box__ = __webpack_require__(\"0+Hh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_button__ = __webpack_require__(\"rAoZ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__style__ = __webpack_require__(\"e0/M\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__style__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar Contract = __webpack_require__(\"+ENZ\").default;\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/gold.png', alt: 'Gold', height: '24' });\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref5 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/stone.png', alt: 'Stone', height: '24' });\n\nvar _ref6 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref7 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/wood.png', alt: 'Wood', height: '24' });\n\nvar _ref8 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref9 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref10 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref11 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref12 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/gold.png', alt: 'Gold', height: '24' });\n\nvar _ref13 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/stone.png', alt: 'Stone', height: '24' });\n\nvar _ref14 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/wood.png', alt: 'Wood', height: '24' });\n\nvar _ref15 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref16 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref17 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/gold.png', alt: 'Gold', height: '24' });\n\nvar _ref18 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref19 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/stone.png', alt: 'Stone', height: '24' });\n\nvar _ref20 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref21 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/wood.png', alt: 'Wood', height: '24' });\n\nvar _ref22 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref23 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref24 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h3',\n\tnull,\n\t'Buildings'\n);\n\nvar Fortress = function (_Component) {\n\t_inherits(Fortress, _Component);\n\n\tfunction Fortress() {\n\t\t_classCallCheck(this, Fortress);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this));\n\n\t\t_this.state = {\n\t\t\tbuildings: {},\n\t\t\ttroups: {},\n\t\t\tfortress: {\n\t\t\t\tname: 'Loading...',\n\t\t\t\thash: ''\n\t\t\t},\n\t\t\taccount: ''\n\t\t};\n\t\treturn _this;\n\t}\n\n\tFortress.prototype.componentWillMount = function componentWillMount() {\n\t\tvar _this2 = this;\n\n\t\tweb3.eth.getAccounts(function (error, accounts) {\n\t\t\t_this2.setState(_extends({}, _this2.state, {\n\t\t\t\taccount: accounts[0]\n\t\t\t}));\n\t\t});\n\n\t\t// Buildings\n\n\t\tContract.getBuildingIndexLength(function (err, indexLength) {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getBuildingHash(i, function (err, buildingHash) {\n\t\t\t\t\tContract.getBuilding(buildingHash, function (err, building) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\tbuildings: _extends({}, _this2.state.buildings)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.buildings[buildingHash] = _extends({}, _this2.state.buildings[buildingHash], {\n\t\t\t\t\t\t\tname: web3.toAscii(building[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\taction: building[1].toNumber(),\n\t\t\t\t\t\t\tactionRate: building[2].toNumber(),\n\t\t\t\t\t\t\tactionValue: building[3],\n\t\t\t\t\t\t\tactionTimeout: building[4].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Troups\n\n\t\tContract.getTroupIndexLength(function (err, indexLength) {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getTroupHash(i, function (err, troupHash) {\n\t\t\t\t\tContract.getTroup(troupHash, function (err, troup) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\ttroups: _extends({}, _this2.state.troups)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.troups[troupHash] = _extends({}, _this2.state.troups[troupHash], {\n\t\t\t\t\t\t\tname: web3.toAscii(troup[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\tlife: troup[1].toNumber(),\n\t\t\t\t\t\t\tstrength: troup[1].toNumber(),\n\t\t\t\t\t\t\tintelligence: troup[1].toNumber(),\n\t\t\t\t\t\t\tdexterity: troup[1].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\n\t\t\t\t\tContract.getTroupCosts(troupHash, function (err, troup) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\ttroups: _extends({}, _this2.state.troups)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.troups[troupHash] = _extends({}, _this2.state.troups[troupHash], {\n\t\t\t\t\t\t\tgold: troup[0].toNumber(),\n\t\t\t\t\t\t\tstone: troup[1].toNumber(),\n\t\t\t\t\t\t\twood: troup[2].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tFortress.prototype.startAuction = function startAuction(fortressHash) {\n\t\tContract.startAuction(fortressHash, function (err, res) {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t};\n\n\tFortress.prototype.build = function build(fortressHash, buildingHash) {\n\t\tContract.build(fortressHash, buildingHash, function (err, res) {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t};\n\n\tFortress.prototype.buildingAction = function buildingAction(fortressHash, buildingHash) {\n\t\tContract.buildingAction(fortressHash, buildingHash, function (err, res) {\n\t\t\t// listen to action event -> reload (set this.state.fortress.hash = '')??\n\t\t});\n\t};\n\n\tFortress.prototype.render = function render(_ref) {\n\t\tvar _this3 = this;\n\n\t\tvar fortressHash = _ref.fortressHash;\n\n\n\t\tif (this.state.fortress.hash !== fortressHash) {\n\t\t\tContract.getFortress(fortressHash, function (err, res) {\n\t\t\t\t_this3.setState(_extends({}, _this3.state, {\n\t\t\t\t\tfortress: _extends({}, _this3.state.fortress, {\n\t\t\t\t\t\tname: web3.toAscii(res[0]),\n\t\t\t\t\t\towner: res[1],\n\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\twins: res[4].toNumber()\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t\t});\n\t\t\tContract.getResources(fortressHash, function (err, res) {\n\t\t\t\t_this3.setState(_extends({}, _this3.state, {\n\t\t\t\t\tfortress: _extends({}, _this3.state.fortress, {\n\t\t\t\t\t\tgold: res[0].toNumber(),\n\t\t\t\t\t\tstone: res[1].toNumber(),\n\t\t\t\t\t\twood: res[2].toNumber()\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\t// troups and building levels\n\n\t\t\tContract.getBuildingIndexLength(function (err, indexLength) {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getBuildingHash(i, function (err, buildingHash) {\n\t\t\t\t\t\t// building level\n\t\t\t\t\t\tContract.getFortressBuilding(fortressHash, buildingHash, function (err, building) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tbuildings: _extends({}, _this3.state.buildings)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.buildings[buildingHash] = _extends({}, _this3.state.buildings[buildingHash], {\n\t\t\t\t\t\t\t\tlevel: building[0].toNumber(),\n\t\t\t\t\t\t\t\ttimeout: building[1].toNumber()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\n\t\t\t\t\t\t\t// building costs\n\t\t\t\t\t\t\tContract.getBuildingCosts(buildingHash, function (err, costs) {\n\t\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\t\tbuildings: _extends({}, _this3.state.buildings)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnewState.buildings[buildingHash] = _extends({}, _this3.state.buildings[buildingHash], {\n\t\t\t\t\t\t\t\t\tgold: costs[0].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\tstone: costs[1].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\twood: costs[2].toNumber() * (building[0].toNumber() + 1)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tContract.getTroupIndexLength(function (err, indexLength) {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getTroupHash(i, function (err, troupHash) {\n\t\t\t\t\t\tContract.getFortressTroups(fortressHash, troupHash, function (err, troup) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\ttroups: _extends({}, _this3.state.troups)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.troups[troupHash] = _extends({}, _this3.state.troups[troupHash], {\n\t\t\t\t\t\t\t\tamount: troup.toNumber()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState(_extends({}, this.state, {\n\t\t\t\tfortress: _extends({}, this.state.fortress, {\n\t\t\t\t\thash: fortressHash\n\t\t\t\t})\n\t\t\t}));\n\t\t\treturn;\n\t\t}\n\n\t\tvar buildings = [];\n\n\t\tfor (var buildingHash in this.state.buildings) {\n\t\t\tvar _state$buildings$buil = this.state.buildings[buildingHash],\n\t\t\t    name = _state$buildings$buil.name,\n\t\t\t    action = _state$buildings$buil.action,\n\t\t\t    actionRate = _state$buildings$buil.actionRate,\n\t\t\t    actionValue = _state$buildings$buil.actionValue,\n\t\t\t    actionTimeout = _state$buildings$buil.actionTimeout,\n\t\t\t    level = _state$buildings$buil.level,\n\t\t\t    timeout = _state$buildings$buil.timeout,\n\t\t\t    gold = _state$buildings$buil.gold,\n\t\t\t    stone = _state$buildings$buil.stone,\n\t\t\t    wood = _state$buildings$buil.wood;\n\n\n\t\t\tvar now = new Date();\n\n\t\t\tvar mineButton = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_button__[\"a\" /* default */],\n\t\t\t\t{ onClick: this.buildingAction.bind(this, fortressHash, buildingHash) },\n\t\t\t\taction === 1 ? 'Mine' : 'Recrute'\n\t\t\t);\n\n\t\t\tif (now < timeout * 1000 || this.state.account !== this.state.fortress.owner) {\n\t\t\t\tmineButton = '';\n\t\t\t}\n\n\t\t\tvar buildButton = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_button__[\"a\" /* default */],\n\t\t\t\t{ onClick: this.build.bind(this, fortressHash, buildingHash) },\n\t\t\t\t'Build'\n\t\t\t);\n\n\t\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\t\tbuildButton = '';\n\t\t\t}\n\n\t\t\tvar troup = '';\n\n\t\t\tif (this.state.troups[actionValue] && level >= 0) {\n\t\t\t\tvar troupGold = this.state.troups[actionValue].gold * (level + 1) * actionRate,\n\t\t\t\t    troupStone = this.state.troups[actionValue].stone * (level + 1) * actionRate,\n\t\t\t\t    troupWood = this.state.troups[actionValue].wood * (level + 1) * actionRate,\n\t\t\t\t    troupAmount = (level + 1) * actionRate;\n\n\t\t\t\ttroup = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.troup },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.window },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/troups/' + this.state.troups[actionValue].name + '.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.castle })\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.troupResources },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Costs:',\n\t\t\t\t\t\t\t_ref2,\n\t\t\t\t\t\t\ttroupGold,\n\t\t\t\t\t\t\t_ref3,\n\t\t\t\t\t\t\t_ref4,\n\t\t\t\t\t\t\ttroupStone,\n\t\t\t\t\t\t\t_ref5,\n\t\t\t\t\t\t\t_ref6,\n\t\t\t\t\t\t\ttroupWood,\n\t\t\t\t\t\t\t_ref7\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.content },\n\t\t\t\t\t\tthis.state.troups[actionValue].name,\n\t\t\t\t\t\t_ref8,\n\t\t\t\t\t\t_ref9,\n\t\t\t\t\t\t'Recruting ',\n\t\t\t\t\t\ttroupAmount,\n\t\t\t\t\t\t' Troups',\n\t\t\t\t\t\t_ref10,\n\t\t\t\t\t\t'Available: ',\n\t\t\t\t\t\tthis.state.troups[actionValue].amount\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.end })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tbuildings.push(Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\tnull,\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.fortress },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.window },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/buildings/' + name + '.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.castle })\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.resources },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tbuildButton,\n\t\t\t\t\t\t\tmineButton\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.content },\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t' (Level: ',\n\t\t\t\t\t\tlevel,\n\t\t\t\t\t\t')',\n\t\t\t\t\t\t_ref11,\n\t\t\t\t\t\t'Costs: ',\n\t\t\t\t\t\tgold,\n\t\t\t\t\t\t_ref12,\n\t\t\t\t\t\tstone,\n\t\t\t\t\t\t_ref13,\n\t\t\t\t\t\twood,\n\t\t\t\t\t\t_ref14,\n\t\t\t\t\t\t_ref15,\n\t\t\t\t\t\taction === 1 ? 'Mining' : 'Recruting',\n\t\t\t\t\t\t': Every ',\n\t\t\t\t\t\tactionTimeout,\n\t\t\t\t\t\t' Hours',\n\t\t\t\t\t\t_ref16\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.end })\n\t\t\t\t),\n\t\t\t\ttroup\n\t\t\t));\n\t\t}\n\n\t\tvar auctionButton = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_button__[\"a\" /* default */],\n\t\t\t{ onClick: this.startAuction.bind(this, fortressHash) },\n\t\t\t'Start auction'\n\t\t);\n\n\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\tauctionButton = '';\n\t\t}\n\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__components_box__[\"a\" /* default */],\n\t\t\tnull,\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'h1',\n\t\t\t\tnull,\n\t\t\t\tthis.state.fortress.name\n\t\t\t),\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.fortress },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.window },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/castle.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.castle })\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.resources },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tthis.state.fortress.gold,\n\t\t\t\t\t\t_ref17,\n\t\t\t\t\t\t_ref18,\n\t\t\t\t\t\tthis.state.fortress.stone,\n\t\t\t\t\t\t_ref19,\n\t\t\t\t\t\t_ref20,\n\t\t\t\t\t\tthis.state.fortress.wood,\n\t\t\t\t\t\t_ref21\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.content },\n\t\t\t\t\t'(',\n\t\t\t\t\tthis.state.fortress.x,\n\t\t\t\t\t'/',\n\t\t\t\t\tthis.state.fortress.y,\n\t\t\t\t\t')',\n\t\t\t\t\t_ref22,\n\t\t\t\t\t_ref23,\n\t\t\t\t\tauctionButton\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.end })\n\t\t\t),\n\t\t\t_ref24,\n\t\t\tbuildings\n\t\t);\n\t};\n\n\treturn Fortress;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-fortress.chunk.2b660.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"fortress\":\"fortress__3yYSI\",\"window\":\"window__1sOKp\",\"castle\":\"castle__1dCia\",\"resources\":\"resources__3T4Nw\",\"troupResources\":\"troupResources__1z2Nb\",\"end\":\"end__1bFL8\",\"troup\":\"troup__jvt9k\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/fortress/style.css\n// module id = e0/M\n// module chunks = 3","import { h, Component } from 'preact';\nimport Box from '../../components/box';\nimport Button from '../../components/button';\nimport style from './style';\n\nconst Contract = require('./../../contract').default;\n\nexport default class Fortress extends Component {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tbuildings: {},\n\t\t\ttroups: {},\n\t\t\tfortress: {\n\t\t\t\tname: 'Loading...',\n\t\t\t\thash: ''\n\t\t\t},\n\t\t\taccount: ''\n\t\t}\n\t}\n\n\tcomponentWillMount() {\n\t\tweb3.eth.getAccounts((error, accounts) => {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\taccount: accounts[0]\n\t\t\t});\n\t\t});\n\n\t\t// Buildings\n\n\t\tContract.getBuildingIndexLength((err, indexLength) => {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getBuildingHash(i, (err, buildingHash) => {\n\t\t\t\t\tContract.getBuilding(buildingHash, (err, building) => {\n\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tbuildings: {\n\t\t\t\t\t\t\t\t...this.state.buildings,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.buildings[buildingHash] = {\n\t\t\t\t\t\t\t...this.state.buildings[buildingHash],\n\t\t\t\t\t\t\tname: web3.toAscii(building[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\taction: building[1].toNumber(),\n\t\t\t\t\t\t\tactionRate: building[2].toNumber(),\n\t\t\t\t\t\t\tactionValue: building[3],\n\t\t\t\t\t\t\tactionTimeout: building[4].toNumber()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Troups\n\n\t\tContract.getTroupIndexLength((err, indexLength) => {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getTroupHash(i, (err, troupHash) => {\n\t\t\t\t\tContract.getTroup(troupHash, (err, troup) => {\n\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\ttroups: {\n\t\t\t\t\t\t\t\t...this.state.troups,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.troups[troupHash] = {\n\t\t\t\t\t\t\t...this.state.troups[troupHash],\n\t\t\t\t\t\t\tname: web3.toAscii(troup[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\tlife: troup[1].toNumber(),\n\t\t\t\t\t\t\tstrength: troup[1].toNumber(),\n\t\t\t\t\t\t\tintelligence: troup[1].toNumber(),\n\t\t\t\t\t\t\tdexterity: troup[1].toNumber(),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\n\t\t\t\t\tContract.getTroupCosts(troupHash, (err, troup) => {\n\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\ttroups: {\n\t\t\t\t\t\t\t\t...this.state.troups,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.troups[troupHash] = {\n\t\t\t\t\t\t\t...this.state.troups[troupHash],\n\t\t\t\t\t\t\tgold: troup[0].toNumber(),\n\t\t\t\t\t\t\tstone: troup[1].toNumber(),\n\t\t\t\t\t\t\twood: troup[2].toNumber(),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartAuction(fortressHash) {\n\t\tContract.startAuction(fortressHash, (err, res) => {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t}\n\n\tbuild(fortressHash, buildingHash) {\n\t\tContract.build(fortressHash, buildingHash, (err, res) => {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t}\n\t\n\tbuildingAction(fortressHash, buildingHash) {\n\t\tContract.buildingAction(fortressHash, buildingHash, (err, res) => {\n\t\t\t// listen to action event -> reload (set this.state.fortress.hash = '')??\n\t\t});\n\t}\n\n\trender({ fortressHash }) {\n\n\t\tif (this.state.fortress.hash !== fortressHash) {\n\t\t\tContract.getFortress(fortressHash, (err, res) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\t...this.state,\n\t\t\t\t\tfortress: {\n\t\t\t\t\t\t...this.state.fortress,\n\t\t\t\t\t\tname: web3.toAscii(res[0]),\n\t\t\t\t\t\towner: res[1],\n\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\twins: res[4].toNumber(),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tContract.getResources(fortressHash, (err, res) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\t...this.state,\n\t\t\t\t\tfortress: {\n\t\t\t\t\t\t...this.state.fortress,\n\t\t\t\t\t\tgold: res[0].toNumber(),\n\t\t\t\t\t\tstone: res[1].toNumber(),\n\t\t\t\t\t\twood: res[2].toNumber(),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// troups and building levels\n\n\t\t\tContract.getBuildingIndexLength((err, indexLength) => {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getBuildingHash(i, (err, buildingHash) => {\n\t\t\t\t\t\t// building level\n\t\t\t\t\t\tContract.getFortressBuilding(fortressHash, buildingHash, (err, building) => {\n\t\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tbuildings: {\n\t\t\t\t\t\t\t\t\t...this.state.buildings,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.buildings[buildingHash] = {\n\t\t\t\t\t\t\t\t...this.state.buildings[buildingHash],\n\t\t\t\t\t\t\t\tlevel: building[0].toNumber(),\n\t\t\t\t\t\t\t\ttimeout: building[1].toNumber()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState(newState);\n\n\t\t\t\t\t\t\t// building costs\n\t\t\t\t\t\t\tContract.getBuildingCosts(buildingHash, (err, costs) => {\n\t\t\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\tbuildings: {\n\t\t\t\t\t\t\t\t\t\t...this.state.buildings,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tnewState.buildings[buildingHash] = {\n\t\t\t\t\t\t\t\t\t...this.state.buildings[buildingHash],\n\t\t\t\t\t\t\t\t\tgold: costs[0].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\tstone: costs[1].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\twood: costs[2].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tContract.getTroupIndexLength((err, indexLength) => {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getTroupHash(i, (err, troupHash) => {\n\t\t\t\t\t\tContract.getFortressTroups(fortressHash, troupHash, (err, troup) => {\n\t\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\ttroups: {\n\t\t\t\t\t\t\t\t\t...this.state.troups,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.troups[troupHash] = {\n\t\t\t\t\t\t\t\t...this.state.troups[troupHash],\n\t\t\t\t\t\t\t\tamount: troup.toNumber(),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tfortress: {\n\t\t\t\t\t...this.state.fortress,\n\t\t\t\t\thash: fortressHash\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst buildings = [];\n\n\t\tfor (var buildingHash in this.state.buildings) {\n\n\t\t\tvar {\n\t\t\t\tname,\n\t\t\t\taction,\n\t\t\t\tactionRate,\n\t\t\t\tactionValue,\n\t\t\t\tactionTimeout,\n\t\t\t\tlevel,\n\t\t\t\ttimeout,\n\t\t\t\tgold,\n\t\t\t\tstone,\n\t\t\t\twood\n\t\t\t} = this.state.buildings[buildingHash];\n\n\t\t\tvar now = new Date();\n\n\t\t\tvar mineButton = (\n\t\t\t\t<Button onClick={this.buildingAction.bind(this, fortressHash, buildingHash)}>\n\t\t\t\t\t{(action === 1) ? 'Mine' : 'Recrute'}\n\t\t\t\t</Button>\n\t\t\t);\n\n\t\t\tif (now < (timeout * 1000) || this.state.account !== this.state.fortress.owner) {\n\t\t\t\tmineButton = '';\n\t\t\t}\n\n\t\t\tvar buildButton = (\n\t\t\t\t<Button onClick={this.build.bind(this, fortressHash, buildingHash)}>Build</Button>\n\t\t\t);\n\n\t\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\t\tbuildButton = '';\n\t\t\t}\n\n\t\t\tvar troup = '';\n\n\t\t\tif (this.state.troups[actionValue] && level >= 0) {\n\t\t\t\tvar troupGold = this.state.troups[actionValue].gold * (level + 1) * actionRate,\n\t\t\t\t\ttroupStone = this.state.troups[actionValue].stone * (level + 1) * actionRate,\n\t\t\t\t\ttroupWood = this.state.troups[actionValue].wood * (level + 1) * actionRate,\n\t\t\t\t\ttroupAmount = (level + 1) * actionRate;\n\n\t\t\t\ttroup = (\n\t\t\t\t\t<div className={style.troup}>\n\t\t\t\t\t\t<div className={style.window}>\n\t\t\t\t\t\t\t<img src={'/assets/troups/' + this.state.troups[actionValue].name + '.png'} width=\"60\" className={style.castle} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.troupResources}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tCosts:<br />\n\t\t\t\t\t\t\t\t{troupGold}<img src='/assets/gold.png' alt='Gold' height=\"24\" /><br />\n\t\t\t\t\t\t\t\t{troupStone}<img src='/assets/stone.png' alt='Stone' height=\"24\" /><br />\n\t\t\t\t\t\t\t\t{troupWood}<img src='/assets/wood.png' alt='Wood' height=\"24\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.content}>\n\t\t\t\t\t\t\t{this.state.troups[actionValue].name}<br /><br />\n\t\t\t\t\t\t\tRecruting {troupAmount} Troups<br />\n\t\t\t\t\t\t\tAvailable: {this.state.troups[actionValue].amount}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.end} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tbuildings.push((\n\t\t\t\t<div>\n\t\t\t\t\t<div className={style.fortress}>\n\t\t\t\t\t\t<div className={style.window}>\n\t\t\t\t\t\t\t<img src={'/assets/buildings/' + name + '.png'} width=\"60\" className={style.castle} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.resources}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{buildButton}\n\t\t\t\t\t\t\t\t{mineButton}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.content}>\n\t\t\t\t\t\t\t{name} (Level: {level})<br />\n\t\t\t\t\t\t\tCosts: {gold}<img src='/assets/gold.png' alt='Gold' height=\"24\" />\n\t\t\t\t\t\t\t{stone}<img src='/assets/stone.png' alt='Stone' height=\"24\" />\n\t\t\t\t\t\t\t{wood}<img src='/assets/wood.png' alt='Wood' height=\"24\" /><br />\n\t\t\t\t\t\t\t{(action === 1) ? 'Mining' : 'Recruting'}: Every {actionTimeout} Hours<br />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.end} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{troup}\n\t\t\t\t</div>\n\t\t\t));\n\t\t}\n\t\t\n\t\tvar auctionButton = (\n\t\t\t<Button onClick={this.startAuction.bind(this, fortressHash)}>Start auction</Button>\n\t\t);\n\n\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\tauctionButton = '';\n\t\t}\n\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<h1>{this.state.fortress.name}</h1>\n\t\t\t\t<div className={style.fortress}>\n                    <div className={style.window}>\n                        <img src='/assets/castle.png' width=\"60\" className={style.castle} />\n                    </div>\n                    <div className={style.resources}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{this.state.fortress.gold}\n\t\t\t\t\t\t\t<img src='/assets/gold.png' alt='Gold' height=\"24\" />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t{this.state.fortress.stone}\n\t\t\t\t\t\t\t<img src='/assets/stone.png' alt='Stone' height=\"24\" />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t{this.state.fortress.wood}\n\t\t\t\t\t\t\t<img src='/assets/wood.png' alt='Wood' height=\"24\" />\n\t\t\t\t\t\t</div>\n                    </div>\n                    <div className={style.content}>\n\t\t\t\t\t\t({this.state.fortress.x}/{this.state.fortress.y})<br /><br />\n\t\t\t\t\t\t{auctionButton}\n                    </div>\n                    <div className={style.end} />\n                </div>\n\t\t\t\t<h3>Buildings</h3>\n\t\t\t\t{buildings}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/fortress/index.js"],"sourceRoot":""}