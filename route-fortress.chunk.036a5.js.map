{"version":3,"sources":["webpack:///route-fortress.chunk.036a5.js","webpack:///./routes/fortress/index.js","webpack:///./routes/fortress/style.css"],"names":["webpackJsonp","WNga","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","d","Fortress","__WEBPACK_IMPORTED_MODULE_0_preact__","__WEBPACK_IMPORTED_MODULE_1__components_box__","n","__WEBPACK_IMPORTED_MODULE_2__components_button__","__WEBPACK_IMPORTED_MODULE_3__style__","__WEBPACK_IMPORTED_MODULE_3__style___default","_extends","assign","target","i","arguments","length","source","key","hasOwnProperty","Contract","default","_ref2","_ref3","src","alt","height","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","_ref18","_ref19","_ref20","_ref21","_ref22","_ref23","_ref24","_Component","_this","this","state","buildings","troups","fortress","name","hash","account","componentWillMount","_this2","web3","eth","getAccounts","error","accounts","setState","getBuildingIndexLength","err","indexLength","toNumber","getBuildingHash","buildingHash","getBuilding","building","newState","toAscii","replace","action","actionRate","actionValue","actionTimeout","getTroupIndexLength","getTroupHash","troupHash","getTroup","troup","life","strength","intelligence","dexterity","getTroupCosts","gold","stone","wood","startAuction","fortressHash","build","buildingAction","render","_ref","_this3","getFortress","res","owner","x","y","wins","getResources","getFortressBuilding","level","timeout","getBuildingCosts","costs","getFortressTroups","amount","_state$buildings$buil","now","Date","mineButton","onClick","bind","buildButton","troupGold","troupStone","troupWood","troupAmount","className","a","window","width","castle","troupResources","content","end","push","resources","auctionButton","e0/M","exports"],"mappings":"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","file":"route-fortress.chunk.036a5.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ \"WNga\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Fortress; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact__ = __webpack_require__(\"KM04\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_preact___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_preact__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_box__ = __webpack_require__(\"0+Hh\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_button__ = __webpack_require__(\"rAoZ\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__style__ = __webpack_require__(\"e0/M\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__style___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__style__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar Contract = __webpack_require__(\"+ENZ\").default;\n\nvar _ref2 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref3 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/gold.png', alt: 'Gold', height: '24' });\n\nvar _ref4 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref5 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/stone.png', alt: 'Stone', height: '24' });\n\nvar _ref6 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref7 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/wood.png', alt: 'Wood', height: '24' });\n\nvar _ref8 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref9 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref10 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref11 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref12 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/gold.png', alt: 'Gold', height: '24' });\n\nvar _ref13 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/stone.png', alt: 'Stone', height: '24' });\n\nvar _ref14 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/wood.png', alt: 'Wood', height: '24' });\n\nvar _ref15 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref16 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref17 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/gold.png', alt: 'Gold', height: '24' });\n\nvar _ref18 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref19 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/stone.png', alt: 'Stone', height: '24' });\n\nvar _ref20 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref21 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/wood.png', alt: 'Wood', height: '24' });\n\nvar _ref22 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref23 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('br', null);\n\nvar _ref24 = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t'h3',\n\tnull,\n\t'Buildings'\n);\n\nvar Fortress = function (_Component) {\n\t_inherits(Fortress, _Component);\n\n\tfunction Fortress() {\n\t\t_classCallCheck(this, Fortress);\n\n\t\tvar _this = _possibleConstructorReturn(this, _Component.call(this));\n\n\t\t_this.state = {\n\t\t\tbuildings: {},\n\t\t\ttroups: {},\n\t\t\tfortress: {\n\t\t\t\tname: 'Loading...',\n\t\t\t\thash: ''\n\t\t\t},\n\t\t\taccount: ''\n\t\t};\n\t\treturn _this;\n\t}\n\n\tFortress.prototype.componentWillMount = function componentWillMount() {\n\t\tvar _this2 = this;\n\n\t\tweb3.eth.getAccounts(function (error, accounts) {\n\t\t\t_this2.setState(_extends({}, _this2.state, {\n\t\t\t\taccount: accounts[0]\n\t\t\t}));\n\t\t});\n\n\t\t// Buildings\n\n\t\tContract.getBuildingIndexLength(function (err, indexLength) {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getBuildingHash(i, function (err, buildingHash) {\n\t\t\t\t\tContract.getBuilding(buildingHash, function (err, building) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\tbuildings: _extends({}, _this2.state.buildings)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.buildings[buildingHash] = _extends({}, _this2.state.buildings[buildingHash], {\n\t\t\t\t\t\t\tname: web3.toAscii(building[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\taction: building[1].toNumber(),\n\t\t\t\t\t\t\tactionRate: building[2].toNumber(),\n\t\t\t\t\t\t\tactionValue: building[3],\n\t\t\t\t\t\t\tactionTimeout: building[4].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Troups\n\n\t\tContract.getTroupIndexLength(function (err, indexLength) {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getTroupHash(i, function (err, troupHash) {\n\t\t\t\t\tContract.getTroup(troupHash, function (err, troup) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\ttroups: _extends({}, _this2.state.troups)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.troups[troupHash] = _extends({}, _this2.state.troups[troupHash], {\n\t\t\t\t\t\t\tname: web3.toAscii(troup[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\tlife: troup[1].toNumber(),\n\t\t\t\t\t\t\tstrength: troup[1].toNumber(),\n\t\t\t\t\t\t\tintelligence: troup[1].toNumber(),\n\t\t\t\t\t\t\tdexterity: troup[1].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\n\t\t\t\t\tContract.getTroupCosts(troupHash, function (err, troup) {\n\t\t\t\t\t\tvar newState = _extends({}, _this2.state, {\n\t\t\t\t\t\t\ttroups: _extends({}, _this2.state.troups)\n\t\t\t\t\t\t});\n\t\t\t\t\t\tnewState.troups[troupHash] = _extends({}, _this2.state.troups[troupHash], {\n\t\t\t\t\t\t\tgold: troup[0].toNumber(),\n\t\t\t\t\t\t\tstone: troup[1].toNumber(),\n\t\t\t\t\t\t\twood: troup[2].toNumber()\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_this2.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tFortress.prototype.startAuction = function startAuction(fortressHash) {\n\t\tContract.startAuction(fortressHash, function (err, res) {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t};\n\n\tFortress.prototype.build = function build(fortressHash, buildingHash) {\n\t\tContract.build(fortressHash, buildingHash, function (err, res) {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t};\n\n\tFortress.prototype.buildingAction = function buildingAction(fortressHash, buildingHash) {\n\t\tContract.buildingAction(fortressHash, buildingHash, function (err, res) {\n\t\t\t// listen to action event -> reload (set this.state.fortress.hash = '')??\n\t\t});\n\t};\n\n\tFortress.prototype.render = function render(_ref) {\n\t\tvar _this3 = this;\n\n\t\tvar fortressHash = _ref.fortressHash;\n\n\n\t\tif (this.state.fortress.hash !== fortressHash) {\n\t\t\tContract.getFortress(fortressHash, function (err, res) {\n\t\t\t\t_this3.setState(_extends({}, _this3.state, {\n\t\t\t\t\tfortress: _extends({}, _this3.state.fortress, {\n\t\t\t\t\t\tname: web3.toAscii(res[0]),\n\t\t\t\t\t\towner: res[1],\n\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\twins: res[4].toNumber()\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t\t});\n\t\t\tContract.getResources(fortressHash, function (err, res) {\n\t\t\t\t_this3.setState(_extends({}, _this3.state, {\n\t\t\t\t\tfortress: _extends({}, _this3.state.fortress, {\n\t\t\t\t\t\tgold: res[0].toNumber(),\n\t\t\t\t\t\tstone: res[1].toNumber(),\n\t\t\t\t\t\twood: res[2].toNumber()\n\t\t\t\t\t})\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\t// troups and building levels\n\n\t\t\tContract.getBuildingIndexLength(function (err, indexLength) {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getBuildingHash(i, function (err, buildingHash) {\n\t\t\t\t\t\t// building level\n\t\t\t\t\t\tContract.getFortressBuilding(fortressHash, buildingHash, function (err, building) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\tbuildings: _extends({}, _this3.state.buildings)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.buildings[buildingHash] = _extends({}, _this3.state.buildings[buildingHash], {\n\t\t\t\t\t\t\t\tlevel: building[0].toNumber(),\n\t\t\t\t\t\t\t\ttimeout: building[1].toNumber()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\n\t\t\t\t\t\t\t// building costs\n\t\t\t\t\t\t\tContract.getBuildingCosts(buildingHash, function (err, costs) {\n\t\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\t\tbuildings: _extends({}, _this3.state.buildings)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tnewState.buildings[buildingHash] = _extends({}, _this3.state.buildings[buildingHash], {\n\t\t\t\t\t\t\t\t\tgold: costs[0].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\tstone: costs[1].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\twood: costs[2].toNumber() * (building[0].toNumber() + 1)\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tContract.getTroupIndexLength(function (err, indexLength) {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getTroupHash(i, function (err, troupHash) {\n\t\t\t\t\t\tContract.getFortressTroups(fortressHash, troupHash, function (err, troup) {\n\t\t\t\t\t\t\tvar newState = _extends({}, _this3.state, {\n\t\t\t\t\t\t\t\ttroups: _extends({}, _this3.state.troups)\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tnewState.troups[troupHash] = _extends({}, _this3.state.troups[troupHash], {\n\t\t\t\t\t\t\t\tamount: troup.toNumber()\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_this3.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState(_extends({}, this.state, {\n\t\t\t\tfortress: _extends({}, this.state.fortress, {\n\t\t\t\t\thash: fortressHash\n\t\t\t\t})\n\t\t\t}));\n\t\t\treturn;\n\t\t}\n\n\t\tvar buildings = [];\n\n\t\tfor (var buildingHash in this.state.buildings) {\n\t\t\t// In the next contract update -> remove buildings, the following one is somehow broken\n\t\t\tif (buildingHash === '0x013fe665d081d447d18c02806c23234ff4e64e732fa7a5814abc87a0dac86737') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar _state$buildings$buil = this.state.buildings[buildingHash],\n\t\t\t    name = _state$buildings$buil.name,\n\t\t\t    action = _state$buildings$buil.action,\n\t\t\t    actionRate = _state$buildings$buil.actionRate,\n\t\t\t    actionValue = _state$buildings$buil.actionValue,\n\t\t\t    actionTimeout = _state$buildings$buil.actionTimeout,\n\t\t\t    level = _state$buildings$buil.level,\n\t\t\t    timeout = _state$buildings$buil.timeout,\n\t\t\t    gold = _state$buildings$buil.gold,\n\t\t\t    stone = _state$buildings$buil.stone,\n\t\t\t    wood = _state$buildings$buil.wood;\n\n\n\t\t\tvar now = new Date();\n\n\t\t\tvar mineButton = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_button__[\"a\" /* default */],\n\t\t\t\t{ onClick: this.buildingAction.bind(this, fortressHash, buildingHash) },\n\t\t\t\taction === 1 ? 'Mine' : 'Recrute'\n\t\t\t);\n\n\t\t\tif (now < timeout * 1000 || this.state.account !== this.state.fortress.owner) {\n\t\t\t\tmineButton = '';\n\t\t\t}\n\n\t\t\tvar buildButton = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_button__[\"a\" /* default */],\n\t\t\t\t{ onClick: this.build.bind(this, fortressHash, buildingHash) },\n\t\t\t\t'Build'\n\t\t\t);\n\n\t\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\t\tbuildButton = '';\n\t\t\t}\n\n\t\t\tvar troup = '';\n\n\t\t\tif (this.state.troups[actionValue] && level >= 0) {\n\t\t\t\tvar troupGold = this.state.troups[actionValue].gold * (level + 1) * actionRate,\n\t\t\t\t    troupStone = this.state.troups[actionValue].stone * (level + 1) * actionRate,\n\t\t\t\t    troupWood = this.state.troups[actionValue].wood * (level + 1) * actionRate,\n\t\t\t\t    troupAmount = (level + 1) * actionRate;\n\n\t\t\t\ttroup = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.troup },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.window },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/troups/' + this.state.troups[actionValue].name + '.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.castle })\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.troupResources },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t'Costs:',\n\t\t\t\t\t\t\t_ref2,\n\t\t\t\t\t\t\ttroupGold,\n\t\t\t\t\t\t\t_ref3,\n\t\t\t\t\t\t\t_ref4,\n\t\t\t\t\t\t\ttroupStone,\n\t\t\t\t\t\t\t_ref5,\n\t\t\t\t\t\t\t_ref6,\n\t\t\t\t\t\t\ttroupWood,\n\t\t\t\t\t\t\t_ref7\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.content },\n\t\t\t\t\t\tthis.state.troups[actionValue].name,\n\t\t\t\t\t\t_ref8,\n\t\t\t\t\t\t_ref9,\n\t\t\t\t\t\t'Recruting ',\n\t\t\t\t\t\ttroupAmount,\n\t\t\t\t\t\t' Troups',\n\t\t\t\t\t\t_ref10,\n\t\t\t\t\t\t'Available: ',\n\t\t\t\t\t\tthis.state.troups[actionValue].amount\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.end })\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tbuildings.push(Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\tnull,\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.fortress },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.window },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/buildings/' + name + '.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.castle })\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.resources },\n\t\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t\t'div',\n\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\tbuildButton,\n\t\t\t\t\t\t\tmineButton\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.content },\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t' (Level: ',\n\t\t\t\t\t\tlevel,\n\t\t\t\t\t\t')',\n\t\t\t\t\t\t_ref11,\n\t\t\t\t\t\t'Costs: ',\n\t\t\t\t\t\tgold,\n\t\t\t\t\t\t_ref12,\n\t\t\t\t\t\tstone,\n\t\t\t\t\t\t_ref13,\n\t\t\t\t\t\twood,\n\t\t\t\t\t\t_ref14,\n\t\t\t\t\t\t_ref15,\n\t\t\t\t\t\taction === 1 ? 'Mining' : 'Recruting',\n\t\t\t\t\t\t': Every ',\n\t\t\t\t\t\tactionTimeout,\n\t\t\t\t\t\t' Hours',\n\t\t\t\t\t\t_ref16\n\t\t\t\t\t),\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.end })\n\t\t\t\t),\n\t\t\t\ttroup\n\t\t\t));\n\t\t}\n\n\t\tvar auctionButton = Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t__WEBPACK_IMPORTED_MODULE_2__components_button__[\"a\" /* default */],\n\t\t\t{ onClick: this.startAuction.bind(this, fortressHash) },\n\t\t\t'Start auction'\n\t\t);\n\n\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\tauctionButton = '';\n\t\t}\n\n\t\treturn Object(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t__WEBPACK_IMPORTED_MODULE_1__components_box__[\"a\" /* default */],\n\t\t\tnull,\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'h1',\n\t\t\t\tnull,\n\t\t\t\tthis.state.fortress.name\n\t\t\t),\n\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t'div',\n\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.fortress },\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.window },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('img', { src: '/assets/castle.png', width: '60', className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.castle })\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.resources },\n\t\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\tnull,\n\t\t\t\t\t\tthis.state.fortress.gold,\n\t\t\t\t\t\t_ref17,\n\t\t\t\t\t\t_ref18,\n\t\t\t\t\t\tthis.state.fortress.stone,\n\t\t\t\t\t\t_ref19,\n\t\t\t\t\t\t_ref20,\n\t\t\t\t\t\tthis.state.fortress.wood,\n\t\t\t\t\t\t_ref21\n\t\t\t\t\t)\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])(\n\t\t\t\t\t'div',\n\t\t\t\t\t{ className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.content },\n\t\t\t\t\t'(',\n\t\t\t\t\tthis.state.fortress.x,\n\t\t\t\t\t'/',\n\t\t\t\t\tthis.state.fortress.y,\n\t\t\t\t\t')',\n\t\t\t\t\t_ref22,\n\t\t\t\t\t_ref23,\n\t\t\t\t\tauctionButton\n\t\t\t\t),\n\t\t\t\tObject(__WEBPACK_IMPORTED_MODULE_0_preact__[\"h\"])('div', { className: __WEBPACK_IMPORTED_MODULE_3__style___default.a.end })\n\t\t\t),\n\t\t\t_ref24,\n\t\t\tbuildings\n\t\t);\n\t};\n\n\treturn Fortress;\n}(__WEBPACK_IMPORTED_MODULE_0_preact__[\"Component\"]);\n\n\n\n/***/ }),\n\n/***/ \"e0/M\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"fortress\":\"fortress__3yYSI\",\"window\":\"window__1sOKp\",\"castle\":\"castle__1dCia\",\"resources\":\"resources__3T4Nw\",\"troupResources\":\"troupResources__1z2Nb\",\"end\":\"end__1bFL8\",\"troup\":\"troup__jvt9k\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-fortress.chunk.036a5.js","import { h, Component } from 'preact';\nimport Box from '../../components/box';\nimport Button from '../../components/button';\nimport style from './style';\n\nconst Contract = require('./../../contract').default;\n\nexport default class Fortress extends Component {\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.state = {\n\t\t\tbuildings: {},\n\t\t\ttroups: {},\n\t\t\tfortress: {\n\t\t\t\tname: 'Loading...',\n\t\t\t\thash: ''\n\t\t\t},\n\t\t\taccount: ''\n\t\t}\n\t}\n\n\tcomponentWillMount() {\n\t\tweb3.eth.getAccounts((error, accounts) => {\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\taccount: accounts[0]\n\t\t\t});\n\t\t});\n\n\t\t// Buildings\n\n\t\tContract.getBuildingIndexLength((err, indexLength) => {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getBuildingHash(i, (err, buildingHash) => {\n\t\t\t\t\tContract.getBuilding(buildingHash, (err, building) => {\n\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\tbuildings: {\n\t\t\t\t\t\t\t\t...this.state.buildings,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.buildings[buildingHash] = {\n\t\t\t\t\t\t\t...this.state.buildings[buildingHash],\n\t\t\t\t\t\t\tname: web3.toAscii(building[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\taction: building[1].toNumber(),\n\t\t\t\t\t\t\tactionRate: building[2].toNumber(),\n\t\t\t\t\t\t\tactionValue: building[3],\n\t\t\t\t\t\t\tactionTimeout: building[4].toNumber()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Troups\n\n\t\tContract.getTroupIndexLength((err, indexLength) => {\n\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\tContract.getTroupHash(i, (err, troupHash) => {\n\t\t\t\t\tContract.getTroup(troupHash, (err, troup) => {\n\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\ttroups: {\n\t\t\t\t\t\t\t\t...this.state.troups,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.troups[troupHash] = {\n\t\t\t\t\t\t\t...this.state.troups[troupHash],\n\t\t\t\t\t\t\tname: web3.toAscii(troup[0]).replace(/\\u0000/g, ''),\n\t\t\t\t\t\t\tlife: troup[1].toNumber(),\n\t\t\t\t\t\t\tstrength: troup[1].toNumber(),\n\t\t\t\t\t\t\tintelligence: troup[1].toNumber(),\n\t\t\t\t\t\t\tdexterity: troup[1].toNumber(),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\n\t\t\t\t\tContract.getTroupCosts(troupHash, (err, troup) => {\n\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\ttroups: {\n\t\t\t\t\t\t\t\t...this.state.troups,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tnewState.troups[troupHash] = {\n\t\t\t\t\t\t\t...this.state.troups[troupHash],\n\t\t\t\t\t\t\tgold: troup[0].toNumber(),\n\t\t\t\t\t\t\tstone: troup[1].toNumber(),\n\t\t\t\t\t\t\twood: troup[2].toNumber(),\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartAuction(fortressHash) {\n\t\tContract.startAuction(fortressHash, (err, res) => {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t}\n\n\tbuild(fortressHash, buildingHash) {\n\t\tContract.build(fortressHash, buildingHash, (err, res) => {\n\t\t\t// listen to build event -> reload\n\t\t});\n\t}\n\t\n\tbuildingAction(fortressHash, buildingHash) {\n\t\tContract.buildingAction(fortressHash, buildingHash, (err, res) => {\n\t\t\t// listen to action event -> reload (set this.state.fortress.hash = '')??\n\t\t});\n\t}\n\n\trender({ fortressHash }) {\n\n\t\tif (this.state.fortress.hash !== fortressHash) {\n\t\t\tContract.getFortress(fortressHash, (err, res) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\t...this.state,\n\t\t\t\t\tfortress: {\n\t\t\t\t\t\t...this.state.fortress,\n\t\t\t\t\t\tname: web3.toAscii(res[0]),\n\t\t\t\t\t\towner: res[1],\n\t\t\t\t\t\tx: res[2].toNumber(),\n\t\t\t\t\t\ty: res[3].toNumber(),\n\t\t\t\t\t\twins: res[4].toNumber(),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\tContract.getResources(fortressHash, (err, res) => {\n\t\t\t\tthis.setState({\n\t\t\t\t\t...this.state,\n\t\t\t\t\tfortress: {\n\t\t\t\t\t\t...this.state.fortress,\n\t\t\t\t\t\tgold: res[0].toNumber(),\n\t\t\t\t\t\tstone: res[1].toNumber(),\n\t\t\t\t\t\twood: res[2].toNumber(),\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// troups and building levels\n\n\t\t\tContract.getBuildingIndexLength((err, indexLength) => {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getBuildingHash(i, (err, buildingHash) => {\n\t\t\t\t\t\t// building level\n\t\t\t\t\t\tContract.getFortressBuilding(fortressHash, buildingHash, (err, building) => {\n\t\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\tbuildings: {\n\t\t\t\t\t\t\t\t\t...this.state.buildings,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.buildings[buildingHash] = {\n\t\t\t\t\t\t\t\t...this.state.buildings[buildingHash],\n\t\t\t\t\t\t\t\tlevel: building[0].toNumber(),\n\t\t\t\t\t\t\t\ttimeout: building[1].toNumber()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState(newState);\n\n\t\t\t\t\t\t\t// building costs\n\t\t\t\t\t\t\tContract.getBuildingCosts(buildingHash, (err, costs) => {\n\t\t\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\t\tbuildings: {\n\t\t\t\t\t\t\t\t\t\t...this.state.buildings,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tnewState.buildings[buildingHash] = {\n\t\t\t\t\t\t\t\t\t...this.state.buildings[buildingHash],\n\t\t\t\t\t\t\t\t\tgold: costs[0].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\tstone: costs[1].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t\twood: costs[2].toNumber() * (building[0].toNumber() + 1),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tContract.getTroupIndexLength((err, indexLength) => {\n\t\t\t\tfor (var i = 0; i < indexLength.toNumber(); i++) {\n\t\t\t\t\tContract.getTroupHash(i, (err, troupHash) => {\n\t\t\t\t\t\tContract.getFortressTroups(fortressHash, troupHash, (err, troup) => {\n\t\t\t\t\t\t\tconst newState = {\n\t\t\t\t\t\t\t\t...this.state,\n\t\t\t\t\t\t\t\ttroups: {\n\t\t\t\t\t\t\t\t\t...this.state.troups,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tnewState.troups[troupHash] = {\n\t\t\t\t\t\t\t\t...this.state.troups[troupHash],\n\t\t\t\t\t\t\t\tamount: troup.toNumber(),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setState(newState);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.setState({\n\t\t\t\t...this.state,\n\t\t\t\tfortress: {\n\t\t\t\t\t...this.state.fortress,\n\t\t\t\t\thash: fortressHash\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst buildings = [];\n\n\t\tfor (var buildingHash in this.state.buildings) {\n\t\t\t// In the next contract update -> remove buildings, the following one is somehow broken\n\t\t\tif (buildingHash === '0x013fe665d081d447d18c02806c23234ff4e64e732fa7a5814abc87a0dac86737') {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar {\n\t\t\t\tname,\n\t\t\t\taction,\n\t\t\t\tactionRate,\n\t\t\t\tactionValue,\n\t\t\t\tactionTimeout,\n\t\t\t\tlevel,\n\t\t\t\ttimeout,\n\t\t\t\tgold,\n\t\t\t\tstone,\n\t\t\t\twood\n\t\t\t} = this.state.buildings[buildingHash];\n\n\t\t\tvar now = new Date();\n\n\t\t\tvar mineButton = (\n\t\t\t\t<Button onClick={this.buildingAction.bind(this, fortressHash, buildingHash)}>\n\t\t\t\t\t{(action === 1) ? 'Mine' : 'Recrute'}\n\t\t\t\t</Button>\n\t\t\t);\n\n\t\t\tif (now < (timeout * 1000) || this.state.account !== this.state.fortress.owner) {\n\t\t\t\tmineButton = '';\n\t\t\t}\n\n\t\t\tvar buildButton = (\n\t\t\t\t<Button onClick={this.build.bind(this, fortressHash, buildingHash)}>Build</Button>\n\t\t\t);\n\n\t\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\t\tbuildButton = '';\n\t\t\t}\n\n\t\t\tvar troup = '';\n\n\t\t\tif (this.state.troups[actionValue] && level >= 0) {\n\t\t\t\tvar troupGold = this.state.troups[actionValue].gold * (level + 1) * actionRate,\n\t\t\t\t\ttroupStone = this.state.troups[actionValue].stone * (level + 1) * actionRate,\n\t\t\t\t\ttroupWood = this.state.troups[actionValue].wood * (level + 1) * actionRate,\n\t\t\t\t\ttroupAmount = (level + 1) * actionRate;\n\n\t\t\t\ttroup = (\n\t\t\t\t\t<div className={style.troup}>\n\t\t\t\t\t\t<div className={style.window}>\n\t\t\t\t\t\t\t<img src={'/assets/troups/' + this.state.troups[actionValue].name + '.png'} width=\"60\" className={style.castle} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.troupResources}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\tCosts:<br />\n\t\t\t\t\t\t\t\t{troupGold}<img src='/assets/gold.png' alt='Gold' height=\"24\" /><br />\n\t\t\t\t\t\t\t\t{troupStone}<img src='/assets/stone.png' alt='Stone' height=\"24\" /><br />\n\t\t\t\t\t\t\t\t{troupWood}<img src='/assets/wood.png' alt='Wood' height=\"24\" />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.content}>\n\t\t\t\t\t\t\t{this.state.troups[actionValue].name}<br /><br />\n\t\t\t\t\t\t\tRecruting {troupAmount} Troups<br />\n\t\t\t\t\t\t\tAvailable: {this.state.troups[actionValue].amount}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.end} />\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tbuildings.push((\n\t\t\t\t<div>\n\t\t\t\t\t<div className={style.fortress}>\n\t\t\t\t\t\t<div className={style.window}>\n\t\t\t\t\t\t\t<img src={'/assets/buildings/' + name + '.png'} width=\"60\" className={style.castle} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.resources}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{buildButton}\n\t\t\t\t\t\t\t\t{mineButton}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.content}>\n\t\t\t\t\t\t\t{name} (Level: {level})<br />\n\t\t\t\t\t\t\tCosts: {gold}<img src='/assets/gold.png' alt='Gold' height=\"24\" />\n\t\t\t\t\t\t\t{stone}<img src='/assets/stone.png' alt='Stone' height=\"24\" />\n\t\t\t\t\t\t\t{wood}<img src='/assets/wood.png' alt='Wood' height=\"24\" /><br />\n\t\t\t\t\t\t\t{(action === 1) ? 'Mining' : 'Recruting'}: Every {actionTimeout} Hours<br />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className={style.end} />\n\t\t\t\t\t</div>\n\t\t\t\t\t{troup}\n\t\t\t\t</div>\n\t\t\t));\n\t\t}\n\t\t\n\t\tvar auctionButton = (\n\t\t\t<Button onClick={this.startAuction.bind(this, fortressHash)}>Start auction</Button>\n\t\t);\n\n\t\tif (this.state.account !== this.state.fortress.owner) {\n\t\t\tauctionButton = '';\n\t\t}\n\n\t\treturn (\n\t\t\t<Box>\n\t\t\t\t<h1>{this.state.fortress.name}</h1>\n\t\t\t\t<div className={style.fortress}>\n                    <div className={style.window}>\n                        <img src='/assets/castle.png' width=\"60\" className={style.castle} />\n                    </div>\n                    <div className={style.resources}>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t{this.state.fortress.gold}\n\t\t\t\t\t\t\t<img src='/assets/gold.png' alt='Gold' height=\"24\" />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t{this.state.fortress.stone}\n\t\t\t\t\t\t\t<img src='/assets/stone.png' alt='Stone' height=\"24\" />\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t{this.state.fortress.wood}\n\t\t\t\t\t\t\t<img src='/assets/wood.png' alt='Wood' height=\"24\" />\n\t\t\t\t\t\t</div>\n                    </div>\n                    <div className={style.content}>\n\t\t\t\t\t\t({this.state.fortress.x}/{this.state.fortress.y})<br /><br />\n\t\t\t\t\t\t{auctionButton}\n                    </div>\n                    <div className={style.end} />\n                </div>\n\t\t\t\t<h3>Buildings</h3>\n\t\t\t\t{buildings}\n\t\t\t</Box>\n\t\t);\n\t}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/fortress/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"fortress\":\"fortress__3yYSI\",\"window\":\"window__1sOKp\",\"castle\":\"castle__1dCia\",\"resources\":\"resources__3T4Nw\",\"troupResources\":\"troupResources__1z2Nb\",\"end\":\"end__1bFL8\",\"troup\":\"troup__jvt9k\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/fortress/style.css\n// module id = e0/M\n// module chunks = 3"],"sourceRoot":""}